<!doctype html>
<html lang="en-us">

    <head>

        <!-- Meta -->
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width,initial-scale=1">

        <title>Data retrieval</title>
        <meta name="description" content="Local EGA in Norway">

        <!-- The compiled CSS file -->
        <link rel="stylesheet" href="css/production.css">

        <!-- Web fonts -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700|Source+Serif+Pro:700" rel="stylesheet"> 

        <!-- favicon.ico. Place these in the root directory. -->
        <link rel="shortcut icon" href="/img/favicon.ico">

    </head>

    <body class="has-animations">

    <div class="mr1 pt1 align--center-on-mobile">
        <div class="grid-row">
            <div class="grid-column align--right small">&nbsp;&nbsp;&nbsp;
                <a href="/docs.html" class="link link--text">Docs and Info</a>&nbsp;&nbsp;&nbsp;
                <a href="/pp.html" class="link link--text">Privacy Policy</a>&nbsp;&nbsp;&nbsp;
                <a href="/tos.html" class="link link--text">Terms of Service</a>&nbsp;&nbsp;&nbsp;
                <a href="mailto:fega-norway-support@elixir.no" class="link link--text">Contact Us</a>&nbsp;&nbsp;&nbsp;
                <a href="/about.html" class="link link--text">About</a>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="align--center pt3">
        <div class="container--lg border--bottom pb3">
            <a href="/"><img class="logo mb3 reveal-on-scroll is-revealing" style="max-height: 200px;" src="/img/logo.png" alt="Federated EGA Norway node"></a>
            <h1 class="mb2">Federated EGA Norway node</h1>
            <h2 class="mt3">Retrieval</h2>
        </div>
    </header>

    <main>

        <!-- Feature list -->
        <div class="container pt3 mt2 text--gray align--center">
            <p class="mb3">
                Before the start, please, make sure that you have all the required software installed.
                All the required tools are open-source and developed by Elixir developers.
                You will need an Elixir AAI login to download a dataset from the Federated EGA Norway node. You can
                easily register <a class="link link--text" target="_blank" href="https://ega.elixir.no/">here</a> if
                you have not done so already.
            </p>
            <div class="grid-row">
                <div class="grid-column span-half mb3 reveal-on-scroll is-revealing">
                    <img class="illustration--small mb1" src="/img/encryption.svg" alt="Encryption tool">
                    <p><a class="link link--text" target="_blank" href="https://github.com/elixir-oslo/crypt4gh">Encryption tool</a></p>
                </div>
                <div class="grid-column span-half mb3 reveal-on-scroll is-revealing">
                    <img class="illustration--small mb1" src="/img/uploading.svg" alt="Put in a vault">
                    <p><a class="link link--text" target="_blank" href="https://github.com/elixir-oslo/lega-commander">File manager</a></p>
                </div>
            </div>
        </div>

        <!-- Focus -->
        <div class="container--lg pt1 pb1">

            <div class="grid-row grid-row--center">
                <div class="grid-column mt3 mb2 order-2">
                    <a id="approval"></a><h2><a href="#approval" class="link link--text">1. Approval</a></h2>
                    <p class="mt2">
                        In order to retrieve the desired dataset in Federated EGA, you must first contact the Data
                        Access Committee (DAC) of the dataset to start you data access application.
                    </p>
                    <p class="mt2">
                        After signing the required documents, your data access application will be approved, and the
                        Federated EGA Norway helpdesk will be notified about your granted access to the dataset.
                    </p>
                </div>
                <div class="grid-column span-1"></div>
                <div class="grid-column mt3 mb2 reveal-on-scroll is-revealing">
                    <img src="/img/approval.svg" alt="Approval" width="400px" height="auto">
                </div>
            </div>

            <div class="grid-row grid-row--center">
                <div class="grid-column mt3 mb2 reveal-on-scroll is-revealing">
                    <script src="https://gist.github.com/a-ghanem/bd874dfa9151dedb58fbcf51a09f8133.js"></script>
                </div>
                <div class="grid-column span-1"></div>
                <div class="grid-column mt3 mb2">
                    <div class="border--bottom pb2 mb2">
                        <a id="encryption"></a><h2><a href="#encryption" class="link link--text">2. Encryption</a></h2>
                        <p class="mt2">
                            Before downloading the data, FEGA Norway helpdesk will encrypt it using your <code>crypt4gh</code>
                            public key.
                        </p>
                        <p class="mt2">
                            To generate your encryption keys, please use <code>crypt4gh generate</code> command and
                            enter a selected key name and a password of your choice when prompted.
                        </p>
                        <p class="mt2">
                            Second, send your <code>&lt;key name&gt;.pub.pem</code> public key to the
                            <a href="mailto:fega-norway-support@elixir.no" class="link link--text">FEGA-Norway-Helpdesk</a>, and store
                            your <code>&lt;key name&gt;.sec.pem</code> private key file in a secure manner so that only
                            you can access it.
                        </p>
                    </div>
                    <p class="italic text--gray mb1">
                        You can find more details on the tool
                        <a class="link link--text" target="_blank" href="https://github.com/elixir-oslo/crypt4gh">page</a>
                        on GitHub.
                    </p>
                </div>
            </div>

            <div class="grid-row grid-row--center">
                <div class="grid-column mt3 mb2 order-2">
                    <div class="border--bottom pb2 mb2">
                        <a id="downlading"></a><h2><a href="#downloading" class="link link--text">3. Download</a></h2>
                        <p class="mt2">
                            You can perform the actual download of the previously encrypted data, using
                            <code>lega-commander</code> tool.
                        </p>
                        <p class="mt2">
                            First, you must set <code>ELIXIR_AAI_TOKEN</code>. This is a JWT token that can be
                            generated after successful registration on this page:
                            <a class="link link--text" target="_blank" href="https://ega.elixir.no/token.html">https://ega.elixir.no/token.html</a>.
                        </p>
                        <p class="mt2">
                            Second, check if the file(s) is(are) already listed under your outbox and ready for
                            download (you should have received an email from the FEGA Norway helpdesk confirming this).
                            Finally, you can download the file(s).
                        </p>
                    </div>
                    <p class="italic text--gray mb1">
                        You can find more details on the tool
                        <a class="link link--text" target="_blank" href="https://github.com/elixir-oslo/lega-commander">page</a>
                        on GitHub.
                    </p>
                </div>
                <div class="grid-column span-1"></div>
                <div class="grid-column mt3 mb2 order-1 reveal-on-scroll is-revealing">
                    <script src="https://gist.github.com/a-ghanem/a0da5f13538d8756cd786c67cd3b1635.js"></script>
                </div>
            </div>

            <div class="grid-row grid-row--center">
                <div class="grid-column mt3 mb2 reveal-on-scroll is-revealing">
                    <script src="https://gist.github.com/a-ghanem/06d9f0ad49785985aa722f3b78dfc612.js"></script>
                </div>
                <div class="grid-column span-1"></div>
                <div class="grid-column mt3 mb2">
                    <div class="border--bottom pb2 mb2">
                        <a id="decryption"></a><h2><a href="#decryption" class="link link--text">4. Decryption</a></h2>
                        <p class="mt2">
                            After successful download, you need to use the <code>crypt4gh</code> tool to decrypt the data.
                        </p>
                        <p class="mt2">
                            First, you need to move the data to a secure environment for sensitive data.
                        </p>
                        <p class="mt2">
                            Second, you need to decrypt the downloaded file(s) using the <code>crypt4gh</code> private
                            key corresponding to the public key you provided to the FEGA Norway helpdesk for encrypting the data.
                        </p>
                    </div>
                    <p class="italic text--gray mb1">
                        If you have any questions regarding data retrieval from the Federated EGA Norway node,
                        please contact the <a href="mailto:fega-norway-support@elixir.no" class="link link--text">FEGA-Norway-Helpdesk</a>.
                    </p>
                </div>
            </div>

        </div>



    </main>

    <!-- Footer -->
    <footer class="pt1 pb3 align--center-on-mobile">
        <div class="container">
            <div class="grid-row">
                <div class="grid-column mt2 align--left align--center-on-mobile">
                    <ul class="no-bullets list--inline">
                        <li class="mr1"><a href="mailto:fega-norway-support@elixir.no" class="text"><img class="icon" src="/img/mail.svg" alt="Contact">fega-norway-support@elixir.no</a></li>
                    </ul>
                </div>
            </div>
            <div class="grid-column mt2 span-half">
                <p class="small">Design by <a href="https://www.papayatemplates.com" class="link link--text">Papaya</a>. Illustrations from&nbsp;<a href="https://undraw.co/" class="link link--text">Undraw</a>.</p>
            </div>
        </div>
    </footer>

    <!-- Scroll reveal -->
    <script src="js/scrollreveal.min.js"></script>

    <!-- The compiled JavaScript file -->
    <script src="js/production.js"></script>

    <!-- Cookies popup -->
    <script type="text/javascript" id="cookieinfo" src="js/cookieinfo.min.js" data-moreinfo="/pp.html"></script>

    </body>
</html>

